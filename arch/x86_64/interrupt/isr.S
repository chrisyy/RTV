/*                       RTV Real-Time Hypervisor
 * Copyright (C) 2017  Ying Ye
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */

  .section .text

#define INT(n)          \
  .globl isr##n;        \
isr##n:                 \
  pushq %rax;           \
  pushq %rbx;           \
  pushq %rcx;           \
  pushq %rdx;           \
  pushq %rbp;           \
  pushq %rsi;           \
  pushq %rdi;           \
  pushq %r8;            \
  pushq %r9;            \
  pushq %r10;           \
  pushq %r11;           \
  pushq %r12;           \
  pushq %r13;           \
  pushq %r14;           \
  pushq %r15;           \
  movq $0x##n, %rdi;    \
  call isr_handler;     \
  popq %rax;            \
  popq %r15;            \
  popq %r14;            \
  popq %r13;            \
  popq %r12;            \
  popq %r11;            \
  popq %r10;            \
  popq %r9;             \
  popq %r8;             \
  popq %rdi;            \
  popq %rsi;            \
  popq %rbp;            \
  popq %rdx;            \
  popq %rcx;            \
  popq %rbx;            \
  popq %rax;            \
  iretq;


INT(0)
INT(1)
INT(2)
INT(3)
INT(4)
INT(5)
INT(6)
INT(7)
INT(8)
INT(9)
INT(a)
INT(b)
INT(c)
INT(d)
INT(e)
INT(f)
INT(10)
INT(11)
INT(12)
INT(13)
INT(14)
INT(15)
INT(16)
INT(17)
INT(18)
INT(19)
INT(1a)
INT(1b)
INT(1c)
INT(1d)
INT(1e)
INT(1f)
INT(20)
INT(21)
INT(22)
INT(23)
INT(24)
INT(25)
INT(26)
INT(27)
INT(28)
INT(29)
INT(2a)
INT(2b)
INT(2c)
INT(2d)
INT(2e)
INT(2f)
INT(30)
INT(31)
INT(32)
INT(33)
INT(34)
INT(35)
INT(36)
INT(37)
INT(38)
INT(39)
INT(3a)
INT(3b)
INT(3c)
INT(3d)
INT(3e)
INT(3f)
INT(40)
INT(41)
INT(42)
INT(43)
INT(44)
INT(45)
INT(46)
INT(47)
INT(48)
INT(49)
INT(4a)
INT(4b)
INT(4c)
INT(4d)
INT(4e)
INT(4f)
INT(50)
INT(51)
INT(52)
INT(53)
INT(54)
INT(55)
INT(56)
INT(57)
INT(58)
INT(59)
INT(5a)
INT(5b)
INT(5c)
INT(5d)
INT(5e)
INT(5f)
INT(60)
INT(61)
INT(62)
INT(63)
INT(64)
INT(65)
INT(66)
INT(67)
INT(68)
INT(69)
INT(6a)
INT(6b)
INT(6c)
INT(6d)
INT(6e)
INT(6f)
INT(70)
INT(71)
INT(72)
INT(73)
INT(74)
INT(75)
INT(76)
INT(77)
INT(78)
INT(79)
INT(7a)
INT(7b)
INT(7c)
INT(7d)
INT(7e)
INT(7f)
INT(80)
INT(81)
INT(82)
INT(83)
INT(84)
INT(85)
INT(86)
INT(87)
INT(88)
INT(89)
INT(8a)
INT(8b)
INT(8c)
INT(8d)
INT(8e)
INT(8f)
INT(90)
INT(91)
INT(92)
INT(93)
INT(94)
INT(95)
INT(96)
INT(97)
INT(98)
INT(99)
INT(9a)
INT(9b)
INT(9c)
INT(9d)
INT(9e)
INT(9f)
INT(a0)
INT(a1)
INT(a2)
INT(a3)
INT(a4)
INT(a5)
INT(a6)
INT(a7)
INT(a8)
INT(a9)
INT(aa)
INT(ab)
INT(ac)
INT(ad)
INT(ae)
INT(af)
INT(b0)
INT(b1)
INT(b2)
INT(b3)
INT(b4)
INT(b5)
INT(b6)
INT(b7)
INT(b8)
INT(b9)
INT(ba)
INT(bb)
INT(bc)
INT(bd)
INT(be)
INT(bf)
INT(c0)
INT(c1)
INT(c2)
INT(c3)
INT(c4)
INT(c5)
INT(c6)
INT(c7)
INT(c8)
INT(c9)
INT(ca)
INT(cb)
INT(cc)
INT(cd)
INT(ce)
INT(cf)
INT(d0)
INT(d1)
INT(d2)
INT(d3)
INT(d4)
INT(d5)
INT(d6)
INT(d7)
INT(d8)
INT(d9)
INT(da)
INT(db)
INT(dc)
INT(dd)
INT(de)
INT(df)
INT(e0)
INT(e1)
INT(e2)
INT(e3)
INT(e4)
INT(e5)
INT(e6)
INT(e7)
INT(e8)
INT(e9)
INT(ea)
INT(eb)
INT(ec)
INT(ed)
INT(ee)
INT(ef)
INT(f0)
INT(f1)
INT(f2)
INT(f3)
INT(f4)
INT(f5)
INT(f6)
INT(f7)
INT(f8)
INT(f9)
INT(fa)
INT(fb)
INT(fc)
INT(fd)
INT(fe)
INT(ff)
#undef INT


#define ENTRY(n) .quad isr##n
  .globl int_table
int_table:
ENTRY(0)
ENTRY(1)
ENTRY(2)
ENTRY(3)
ENTRY(4)
ENTRY(5)
ENTRY(6)
ENTRY(7)
ENTRY(8)
ENTRY(9)
ENTRY(a)
ENTRY(b)
ENTRY(c)
ENTRY(d)
ENTRY(e)
ENTRY(f)
ENTRY(10)
ENTRY(11)
ENTRY(12)
ENTRY(13)
ENTRY(14)
ENTRY(15)
ENTRY(16)
ENTRY(17)
ENTRY(18)
ENTRY(19)
ENTRY(1a)
ENTRY(1b)
ENTRY(1c)
ENTRY(1d)
ENTRY(1e)
ENTRY(1f)
ENTRY(20)
ENTRY(21)
ENTRY(22)
ENTRY(23)
ENTRY(24)
ENTRY(25)
ENTRY(26)
ENTRY(27)
ENTRY(28)
ENTRY(29)
ENTRY(2a)
ENTRY(2b)
ENTRY(2c)
ENTRY(2d)
ENTRY(2e)
ENTRY(2f)
ENTRY(30)
ENTRY(31)
ENTRY(32)
ENTRY(33)
ENTRY(34)
ENTRY(35)
ENTRY(36)
ENTRY(37)
ENTRY(38)
ENTRY(39)
ENTRY(3a)
ENTRY(3b)
ENTRY(3c)
ENTRY(3d)
ENTRY(3e)
ENTRY(3f)
ENTRY(40)
ENTRY(41)
ENTRY(42)
ENTRY(43)
ENTRY(44)
ENTRY(45)
ENTRY(46)
ENTRY(47)
ENTRY(48)
ENTRY(49)
ENTRY(4a)
ENTRY(4b)
ENTRY(4c)
ENTRY(4d)
ENTRY(4e)
ENTRY(4f)
ENTRY(50)
ENTRY(51)
ENTRY(52)
ENTRY(53)
ENTRY(54)
ENTRY(55)
ENTRY(56)
ENTRY(57)
ENTRY(58)
ENTRY(59)
ENTRY(5a)
ENTRY(5b)
ENTRY(5c)
ENTRY(5d)
ENTRY(5e)
ENTRY(5f)
ENTRY(60)
ENTRY(61)
ENTRY(62)
ENTRY(63)
ENTRY(64)
ENTRY(65)
ENTRY(66)
ENTRY(67)
ENTRY(68)
ENTRY(69)
ENTRY(6a)
ENTRY(6b)
ENTRY(6c)
ENTRY(6d)
ENTRY(6e)
ENTRY(6f)
ENTRY(70)
ENTRY(71)
ENTRY(72)
ENTRY(73)
ENTRY(74)
ENTRY(75)
ENTRY(76)
ENTRY(77)
ENTRY(78)
ENTRY(79)
ENTRY(7a)
ENTRY(7b)
ENTRY(7c)
ENTRY(7d)
ENTRY(7e)
ENTRY(7f)
ENTRY(80)
ENTRY(81)
ENTRY(82)
ENTRY(83)
ENTRY(84)
ENTRY(85)
ENTRY(86)
ENTRY(87)
ENTRY(88)
ENTRY(89)
ENTRY(8a)
ENTRY(8b)
ENTRY(8c)
ENTRY(8d)
ENTRY(8e)
ENTRY(8f)
ENTRY(90)
ENTRY(91)
ENTRY(92)
ENTRY(93)
ENTRY(94)
ENTRY(95)
ENTRY(96)
ENTRY(97)
ENTRY(98)
ENTRY(99)
ENTRY(9a)
ENTRY(9b)
ENTRY(9c)
ENTRY(9d)
ENTRY(9e)
ENTRY(9f)
ENTRY(a0)
ENTRY(a1)
ENTRY(a2)
ENTRY(a3)
ENTRY(a4)
ENTRY(a5)
ENTRY(a6)
ENTRY(a7)
ENTRY(a8)
ENTRY(a9)
ENTRY(aa)
ENTRY(ab)
ENTRY(ac)
ENTRY(ad)
ENTRY(ae)
ENTRY(af)
ENTRY(b0)
ENTRY(b1)
ENTRY(b2)
ENTRY(b3)
ENTRY(b4)
ENTRY(b5)
ENTRY(b6)
ENTRY(b7)
ENTRY(b8)
ENTRY(b9)
ENTRY(ba)
ENTRY(bb)
ENTRY(bc)
ENTRY(bd)
ENTRY(be)
ENTRY(bf)
ENTRY(c0)
ENTRY(c1)
ENTRY(c2)
ENTRY(c3)
ENTRY(c4)
ENTRY(c5)
ENTRY(c6)
ENTRY(c7)
ENTRY(c8)
ENTRY(c9)
ENTRY(ca)
ENTRY(cb)
ENTRY(cc)
ENTRY(cd)
ENTRY(ce)
ENTRY(cf)
ENTRY(d0)
ENTRY(d1)
ENTRY(d2)
ENTRY(d3)
ENTRY(d4)
ENTRY(d5)
ENTRY(d6)
ENTRY(d7)
ENTRY(d8)
ENTRY(d9)
ENTRY(da)
ENTRY(db)
ENTRY(dc)
ENTRY(dd)
ENTRY(de)
ENTRY(df)
ENTRY(e0)
ENTRY(e1)
ENTRY(e2)
ENTRY(e3)
ENTRY(e4)
ENTRY(e5)
ENTRY(e6)
ENTRY(e7)
ENTRY(e8)
ENTRY(e9)
ENTRY(ea)
ENTRY(eb)
ENTRY(ec)
ENTRY(ed)
ENTRY(ee)
ENTRY(ef)
ENTRY(f0)
ENTRY(f1)
ENTRY(f2)
ENTRY(f3)
ENTRY(f4)
ENTRY(f5)
ENTRY(f6)
ENTRY(f7)
ENTRY(f8)
ENTRY(f9)
ENTRY(fa)
ENTRY(fb)
ENTRY(fc)
ENTRY(fd)
ENTRY(fe)
ENTRY(ff)
#undef ENTRY
